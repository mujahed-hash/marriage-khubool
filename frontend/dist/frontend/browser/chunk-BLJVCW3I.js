import{a as y}from"./chunk-A7LM7CLB.js";import"./chunk-DQJ6WRPO.js";import{C as _,E as a,I as P,La as w,R as p,S as g,Sa as b,U as x,Ua as M,V as C,W as v,X as n,Y as o,Z as s,ha as d,pa as l,qa as m,r as u,x as c,za as h}from"./chunk-AY3CH6AK.js";var S=i=>["/profile",i],V=(i,t)=>t.viewedAt;function I(i,t){i&1&&(n(0,"div",4),s(1,"div",7),n(2,"p"),l(3,"Loading visitors..."),o()())}function k(i,t){i&1&&(n(0,"div",5),s(1,"i",8),n(2,"p"),l(3,"No one has viewed your profile yet."),o()())}function E(i,t){if(i&1&&(n(0,"a",14),l(1,"View"),o()),i&2){let e=d().$implicit;v("routerLink",h(1,S,(e.viewerProfile==null?null:e.viewerProfile._id)||(e.viewerProfile==null?null:e.viewerProfile.profileId)))}}function z(i,t){if(i&1&&(n(0,"div",9),s(1,"img",10),n(2,"div",11)(3,"h3"),l(4),o(),n(5,"p",12),l(6),o()(),n(7,"div",13),l(8),o(),p(9,E,2,3,"a",14),o()),i&2){let e=t.$implicit,r=d(2);a(),v("src",(e.viewerProfile==null?null:e.viewerProfile.profilePhotoUrl)||r.getPlaceholderImg(e.viewer==null?null:e.viewer.gender),_),a(3),m((e.viewerProfile==null?null:e.viewerProfile.fullName)||(e.viewer==null?null:e.viewer.fullName)||"Unknown"),a(2),m((e.viewerProfile==null?null:e.viewerProfile.city)||""),a(2),m(r.timeAgo(e.viewedAt)),a(),g(e.viewerProfile!=null&&e.viewerProfile._id||e.viewerProfile!=null&&e.viewerProfile.profileId?9:-1)}}function T(i,t){if(i&1&&(n(0,"div",6),x(1,z,10,5,"div",9,V),o()),i&2){let e=d();a(),C(e.visitors())}}var O=class i{visitors=c([]);loading=c(!0);visitorService=u(y);ngOnInit(){this.loadVisitors()}async loadVisitors(){this.loading.set(!0);try{let t=await this.visitorService.getMyVisitors();this.visitors.set(t.visitors||[])}catch{this.visitors.set([])}this.loading.set(!1)}getPlaceholderImg(t){return t==="female"?"assets/bride.png":"assets/groom.png"}timeAgo(t){let e=Date.now()-new Date(t).getTime(),r=Math.floor(e/6e4);if(r<60)return`${r}m ago`;let f=Math.floor(r/60);return f<24?`${f}h ago`:`${Math.floor(f/24)}d ago`}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=P({type:i,selectors:[["app-profile-visitor"]],decls:9,vars:1,consts:[[1,"visitor-container"],[1,"page-heading"],[1,"fa-solid","fa-eye"],[1,"page-subtitle"],[1,"loading-state"],[1,"empty-state"],[1,"visitor-list"],[1,"spinner"],[1,"fa-solid","fa-eye-slash"],[1,"visitor-card"],["loading","lazy","alt","Visitor",1,"visitor-avatar",3,"src"],[1,"visitor-info"],[1,"visitor-meta"],[1,"visitor-time"],[1,"btn-view",3,"routerLink"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"h1",1),s(2,"i",2),l(3," Profile Visitors"),o(),n(4,"p",3),l(5,"People who viewed your profile"),o(),p(6,I,4,0,"div",4)(7,k,4,0,"div",5)(8,T,3,0,"div",6),o()),e&2&&(a(6),g(r.loading()?6:r.visitors().length===0?7:8))},dependencies:[w,M,b],styles:[".visitor-container[_ngcontent-%COMP%]{width:100%;max-width:900px;margin:0 auto;padding:0 1rem;font-family:Inter,Segoe UI,system-ui,sans-serif}.page-heading[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1e293b;margin-bottom:.25rem;display:flex;align-items:center;gap:.75rem}.page-heading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6366f1}.page-subtitle[_ngcontent-%COMP%]{color:#64748b;font-size:.9rem;margin-bottom:1.5rem}.visitor-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.visitor-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.85rem 1.25rem;background:#fff;border-radius:12px;border:1px solid #e2e8f0;transition:box-shadow .2s}.visitor-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000000f}.visitor-avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;object-fit:cover;border:2px solid #e0e7ff;flex-shrink:0}.visitor-info[_ngcontent-%COMP%]{flex:1}.visitor-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:.95rem;font-weight:600;color:#0f172a}.visitor-meta[_ngcontent-%COMP%]{margin:0;font-size:.8rem;color:#64748b}.visitor-time[_ngcontent-%COMP%]{font-size:.8rem;color:#94a3b8;white-space:nowrap}.btn-view[_ngcontent-%COMP%]{padding:.4rem .9rem;border-radius:8px;background:#6366f1;color:#fff;text-decoration:none;font-weight:600;font-size:.8rem;transition:background .2s}.btn-view[_ngcontent-%COMP%]:hover{background:#4f46e5}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;color:#64748b}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#cbd5e1;margin-bottom:.75rem}.spinner[_ngcontent-%COMP%]{width:36px;height:36px;border:3px solid #f3f4f6;border-top-color:#6366f1;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:.75rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};export{O as ProfileVisitorComponent};
