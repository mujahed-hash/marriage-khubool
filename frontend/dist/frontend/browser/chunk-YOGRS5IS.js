import{a as R}from"./chunk-BBPVRJQ6.js";import{a as U}from"./chunk-JJRD7MNC.js";import"./chunk-YRFZ7VUJ.js";import{Aa as k,Ba as T,C as M,E as r,I as z,La as A,R as g,S as _,Sa as F,U as S,Ua as D,V as y,W as b,X as i,Y as a,Z as l,a as u,b as x,da as N,fa as C,ha as d,na as v,pa as c,qa as h,r as j,ra as p,s as P,sa as O,t as I,x as f,za as w}from"./chunk-AY3CH6AK.js";var V=t=>["/profile",t],L=(t,n)=>n._id||n.profileId||t;function B(t,n){t&1&&(i(0,"div",7),l(1,"div",9),i(2,"p"),c(3,"Loading..."),a()())}function Y(t,n){t&1&&(i(0,"div",10),l(1,"i",2),i(2,"p"),c(3,"You haven't sent any interests yet."),a(),i(4,"a",12),c(5,"Browse Profiles"),a()())}function $(t,n){if(t&1&&(i(0,"div",13),l(1,"img",14),k(2,"photoUrl"),i(3,"div",15)(4,"h3"),c(5),a(),i(6,"p",16),c(7),a(),i(8,"p",17),c(9),a()(),i(10,"span",18),c(11),a(),i(12,"a",19),c(13,"View Profile"),a()()),t&2){let e=n.$implicit,o=d(3);r(),b("src",T(2,13,e.profilePhotoUrl)||o.getPlaceholderImg(e.gender),M),r(4),h(e.fullName||"N/A"),r(2),O("",e.city||""," \xB7 ",e.occupation||""),r(2),p("ID: ",e.profileId||e._id),r(),v("pending",e.interestStatus==="pending")("accepted",e.interestStatus==="accepted")("rejected",e.interestStatus==="rejected"),r(),p(" ",e.interestStatus||"pending"," "),r(),b("routerLink",w(15,V,e.profileId||e._id))}}function q(t,n){if(t&1&&(i(0,"div",11),S(1,$,14,17,"div",13,L),a()),t&2){let e=d(2);r(),y(e.sentProfiles())}}function G(t,n){if(t&1&&g(0,Y,6,0,"div",10)(1,q,3,0,"div",11),t&2){let e=d();_(e.sentProfiles().length===0?0:1)}}function H(t,n){t&1&&(i(0,"div",10),l(1,"i",6),i(2,"p"),c(3,"No one has sent you interest yet."),a()())}function J(t,n){if(t&1){let e=N();i(0,"div",20)(1,"button",22),C("click",function(){P(e);let m=d().$implicit,s=d(3);return I(s.acceptInterest(m.interestId))}),l(2,"i",23),c(3," Accept "),a(),i(4,"button",24),C("click",function(){P(e);let m=d().$implicit,s=d(3);return I(s.rejectInterest(m.interestId))}),l(5,"i",25),c(6," Reject "),a()()}}function K(t,n){if(t&1&&(i(0,"span",18),c(1),a()),t&2){let e=d().$implicit;v("accepted",e.interestStatus==="accepted")("rejected",e.interestStatus==="rejected"),r(),p(" ",e.interestStatus," ")}}function Q(t,n){if(t&1&&(i(0,"div",13),l(1,"img",14),k(2,"photoUrl"),i(3,"div",15)(4,"h3"),c(5),a(),i(6,"p",16),c(7),a(),i(8,"p",17),c(9),a()(),g(10,J,7,0,"div",20)(11,K,2,5,"span",21),i(12,"a",19),c(13,"View Profile"),a()()),t&2){let e=n.$implicit,o=d(3);r(),b("src",T(2,7,e.profilePhotoUrl)||o.getPlaceholderImg(e.gender),M),r(4),h(e.fullName||"N/A"),r(2),O("",e.city||""," \xB7 ",e.occupation||""),r(2),p("ID: ",e.profileId||e._id),r(),_(e.interestStatus==="pending"?10:11),r(2),b("routerLink",w(9,V,e.profileId||e._id))}}function W(t,n){if(t&1&&(i(0,"div",11),S(1,Q,14,11,"div",13,L),a()),t&2){let e=d(2);r(),y(e.receivedProfiles())}}function X(t,n){if(t&1&&g(0,H,4,0,"div",10)(1,W,3,0,"div",11),t&2){let e=d();_(e.receivedProfiles().length===0?0:1)}}function Z(t,n){if(t&1&&(i(0,"div",8),c(1),a()),t&2){let e=d();r(),h(e.actionMessage())}}var E=class t{activeTab=f("sent");sentProfiles=f([]);receivedProfiles=f([]);loading=f(!0);actionMessage=f("");interestService=j(R);ngOnInit(){this.load()}setTab(n){this.activeTab.set(n)}async load(){this.loading.set(!0);try{let[n,e]=await Promise.all([this.interestService.getSentInterests(),this.interestService.getReceivedInterests()]),o=(n.interests||[]).map(s=>x(u({},s),{_id:s._id||s.profileId})).filter(s=>s&&(s._id||s.profileId)),m=(e.interests||[]).map(s=>x(u({},s.senderProfile||{}),{interestId:s.interestId,interestStatus:s.interestStatus||"pending",sentAt:s.sentAt})).filter(s=>s&&(s._id||s.profileId||s.fullName));this.sentProfiles.set(o),this.receivedProfiles.set(m)}catch{this.sentProfiles.set([]),this.receivedProfiles.set([])}this.loading.set(!1)}async acceptInterest(n){try{await this.interestService.acceptInterest(n),this.receivedProfiles.update(e=>e.map(o=>o.interestId===n?x(u({},o),{interestStatus:"accepted"}):o)),this.showAction("Interest accepted!")}catch(e){this.showAction(e.message||"Failed to accept.")}}async rejectInterest(n){try{await this.interestService.rejectInterest(n),this.receivedProfiles.update(e=>e.map(o=>o.interestId===n?x(u({},o),{interestStatus:"rejected"}):o)),this.showAction("Interest rejected.")}catch(e){this.showAction(e.message||"Failed to reject.")}}showAction(n){this.actionMessage.set(n),setTimeout(()=>this.actionMessage.set(""),3e3)}getPlaceholderImg(n){return n==="female"?"assets/bride.png":"assets/groom.png"}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=z({type:t,selectors:[["app-interests"]],decls:15,vars:8,consts:[[1,"interests-container"],[1,"page-heading"],[1,"fa-solid","fa-heart"],[1,"tabs"],[1,"tab",3,"click"],[1,"fa-solid","fa-paper-plane"],[1,"fa-solid","fa-inbox"],[1,"loading-state"],[1,"action-toast"],[1,"spinner"],[1,"empty-state"],[1,"interest-grid"],["routerLink","/profiles/diamond",1,"btn-browse"],[1,"interest-card"],["loading","lazy","alt","",1,"card-avatar",3,"src"],[1,"card-info"],[1,"card-meta"],[1,"card-id"],[1,"status-badge"],[1,"btn-view",3,"routerLink"],[1,"action-buttons"],[1,"status-badge",3,"accepted","rejected"],["title","Accept",1,"btn-accept",3,"click"],[1,"fa-solid","fa-check"],["title","Reject",1,"btn-reject",3,"click"],[1,"fa-solid","fa-xmark"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"h1",1),l(2,"i",2),c(3," My Interests"),a(),i(4,"div",3)(5,"button",4),C("click",function(){return o.setTab("sent")}),l(6,"i",5),c(7),a(),i(8,"button",4),C("click",function(){return o.setTab("received")}),l(9,"i",6),c(10),a()(),g(11,B,4,0,"div",7)(12,G,2,1)(13,X,2,1),g(14,Z,2,1,"div",8),a()),e&2&&(r(5),v("active",o.activeTab()==="sent"),r(2),p(" Interest Sent (",o.sentProfiles().length,") "),r(),v("active",o.activeTab()==="received"),r(2),p(" Interest Received (",o.receivedProfiles().length,") "),r(),_(o.loading()?11:o.activeTab()==="sent"?12:13),r(3),_(o.actionMessage()?14:-1))},dependencies:[A,D,F,U],styles:[".interests-container[_ngcontent-%COMP%]{width:100%;max-width:900px;margin:0 auto;padding:0 1rem;font-family:Inter,Segoe UI,system-ui,sans-serif}.page-heading[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1e293b;margin-bottom:1.5rem;display:flex;align-items:center;gap:.75rem}.page-heading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#db2777}.tabs[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:1.5rem}.tab[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border:1px solid #e2e8f0;background:#fff;border-radius:10px;cursor:pointer;font-weight:600;font-size:.9rem;color:#64748b;transition:all .2s}.tab[_ngcontent-%COMP%]:hover{background:#f8fafc;color:#1e293b}.tab.active[_ngcontent-%COMP%]{background:#db2777;color:#fff;border-color:#db2777}.tab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.4rem}.interest-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.interest-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 1.25rem;background:#fff;border-radius:14px;border:1px solid #e2e8f0;box-shadow:0 2px 6px #0000000a;transition:box-shadow .2s,transform .2s}.interest-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 16px #00000014;transform:translateY(-1px)}.card-avatar[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;object-fit:cover;border:3px solid #fce7f3;flex-shrink:0}.card-info[_ngcontent-%COMP%]{flex:1}.card-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.05rem;font-weight:600;color:#0f172a}.card-meta[_ngcontent-%COMP%]{margin:.15rem 0;font-size:.85rem;color:#64748b}.card-id[_ngcontent-%COMP%]{margin:0;font-size:.75rem;color:#94a3b8}.btn-view[_ngcontent-%COMP%]{padding:.45rem 1rem;border-radius:8px;background:#db2777;color:#fff;text-decoration:none;font-weight:600;font-size:.8rem;transition:background .2s}.btn-view[_ngcontent-%COMP%]:hover{background:#be185d}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;color:#64748b}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#cbd5e1;margin-bottom:.75rem}.btn-browse[_ngcontent-%COMP%]{margin-top:1rem;padding:.5rem 1.25rem;background:#db2777;color:#fff;border-radius:8px;text-decoration:none;font-weight:600;font-size:.9rem}.spinner[_ngcontent-%COMP%]{width:36px;height:36px;border:3px solid #f3f4f6;border-top-color:#db2777;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:.75rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.3rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:700;text-transform:capitalize;letter-spacing:.3px;flex-shrink:0}.status-badge.pending[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.status-badge.accepted[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.status-badge.rejected[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-shrink:0}.btn-accept[_ngcontent-%COMP%], .btn-reject[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.3rem;padding:.4rem .9rem;border:none;border-radius:8px;font-weight:600;font-size:.8rem;cursor:pointer;transition:all .2s}.btn-accept[_ngcontent-%COMP%]{background:#10b981;color:#fff}.btn-accept[_ngcontent-%COMP%]:hover{background:#059669;transform:scale(1.05)}.btn-reject[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.btn-reject[_ngcontent-%COMP%]:hover{background:#dc2626;transform:scale(1.05)}.action-toast[_ngcontent-%COMP%]{position:fixed;bottom:2rem;left:50%;transform:translate(-50%);background:#0f172a;color:#fff;padding:.75rem 1.5rem;border-radius:12px;font-size:.9rem;font-weight:500;z-index:100;box-shadow:0 8px 20px #00000040;animation:_ngcontent-%COMP%_toastSlideUp .3s ease-out}@keyframes _ngcontent-%COMP%_toastSlideUp{0%{opacity:0;transform:translate(-50%) translateY(10px)}to{opacity:1;transform:translate(-50%) translateY(0)}}@media(max-width:600px){.interest-card[_ngcontent-%COMP%]{flex-wrap:wrap}.action-buttons[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};export{E as InterestsComponent};
