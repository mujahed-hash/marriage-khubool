import{a as X}from"./chunk-Y5Y76L5Y.js";import{a as Y}from"./chunk-NDOALP63.js";import{b as R,c as D,d as W,e as j,f as U,g as F,i as H,j as K,l as Q,p as J}from"./chunk-AKKU7WAO.js";import{a as V}from"./chunk-JJRD7MNC.js";import{a as q}from"./chunk-WNVLNEZI.js";import{a as B}from"./chunk-FH2X7N32.js";import"./chunk-YRFZ7VUJ.js";import{Aa as L,Ba as E,C as w,E as l,Ha as N,I as T,La as A,Pa as k,R as p,S as h,Sa as G,T as y,U as f,Ua as z,V as _,W as g,X as i,Y as r,Z as c,fa as b,ha as d,pa as o,qa as C,r as u,ra as S,sa as O,ta as x,ua as v,va as M,x as P,za as I}from"./chunk-AY3CH6AK.js";var ee=t=>["/profile",t],te=(t,n)=>n._id||t;function ie(t,n){if(t&1&&(i(0,"option",11),o(1),r()),t&2){let e=n.$implicit,a=d();g("value",a.stateLabels[e]),l(),C(a.stateLabels[e])}}function ne(t,n){if(t&1&&o(0),t&2){let e=d(2);O(" ",e.resultIds().length," ",e.resultIds().length===1?"match":"matches"," \u2014 Login to view profiles ")}}function re(t,n){if(t&1&&o(0),t&2){let e=d(2);O(" ",e.results().length," ",e.results().length===1?"result":"results"," found ")}}function ae(t,n){if(t&1&&(i(0,"a",21)(1,"div",22),c(2,"span",23),i(3,"div",24),c(4,"i",25),r()(),i(5,"div",26)(6,"h2",27),o(7,"Member"),r(),i(8,"p"),o(9,"Login to view profile"),r()()()),t&2){let e=n.$implicit,a=d(3);g("routerLink",a.getLoginRedirect(e))}}function oe(t,n){if(t&1&&f(0,ae,10,1,"a",21,y),t&2){let e=d(2);_(e.resultIds())}}function le(t,n){if(t&1&&(i(0,"div",28)(1,"div",22),c(2,"span",29),i(3,"div",30),c(4,"img",31),L(5,"photoUrl"),r()(),i(6,"div",26)(7,"h2",27),o(8),r(),i(9,"p",32),o(10),r(),i(11,"p",33),o(12),r(),i(13,"p",34),o(14),r(),i(15,"p",35),o(16),r(),i(17,"a",36),o(18,"View Profile"),r()()()),t&2){let e=n.$implicit,a=d(3);l(2),g("ngClass",e.membershipTier+"-overlay"),l(2),g("src",E(5,9,e.profilePhotoUrl)||a.getPlaceholderImg(e.gender),w),l(4),C(e.fullName||"Profile"),l(2),S("DOB: ",e.dateOfBirth||"N/A"),l(2),C(e.occupation||"N/A"),l(2),S("Height: ",e.height||"N/A"),l(2),S("Location: ",e.city||e.state||"N/A"),l(),g("ngClass",a.getTierViewClass(e.membershipTier))("routerLink",I(11,ee,e.profileId||e._id))}}function se(t,n){if(t&1&&f(0,le,19,13,"div",28,te),t&2){let e=d(2);_(e.results())}}function ce(t,n){t&1&&(i(0,"div",19),c(1,"i",37),i(2,"p"),o(3,"No profiles found matching your criteria. Try adjusting your filters."),r()())}function de(t,n){t&1&&(i(0,"div",19),c(1,"i",37),i(2,"p"),o(3,"No profiles found matching your criteria. Try adjusting your filters."),r()())}function me(t,n){t&1&&(i(0,"div",20),c(1,"i",38),i(2,"p",39),o(3,"Loading more profiles..."),r()())}function pe(t,n){if(t&1&&(i(0,"div",16)(1,"h2",17),p(2,ne,1,2)(3,re,1,2),r(),i(4,"div",18),p(5,oe,2,0)(6,se,2,0),p(7,ce,4,0,"div",19),p(8,de,4,0,"div",19),r(),p(9,me,4,0,"div",20),r()),t&2){let e=d();l(2),h(e.isGuest?2:3),l(3),h(e.isGuest?5:6),l(2),h(!e.isGuest&&e.results().length===0&&!e.isLoading?7:-1),l(),h(e.isGuest&&e.resultIds().length===0&&!e.isLoading?8:-1),l(),h(e.isLoading?9:-1)}}var Z=class t{searchQuery="";filterState="";filterGender="";hasSearched=!1;results=P([]);resultIds=P([]);currentPage=1;isLoading=!1;hasMore=!0;route=u(k);profileService=u(q);authService=u(B);get isGuest(){return!this.authService.isAuthenticated()}states=Object.keys(X);stateLabels={AP:"Andhra Pradesh",AR:"Arunachal Pradesh",AS:"Assam",BR:"Bihar",CT:"Chhattisgarh",GO:"Goa",GJ:"Gujarat",HR:"Haryana",HP:"Himachal Pradesh",JK:"Jammu & Kashmir",JH:"Jharkhand",KA:"Karnataka",KL:"Kerala",MP:"Madhya Pradesh",MH:"Maharashtra",MN:"Manipur",ME:"Meghalaya",MI:"Mizoram",NL:"Nagaland",OD:"Odisha",PB:"Punjab",RJ:"Rajasthan",SK:"Sikkim",TN:"Tamil Nadu",TS:"Telangana",TR:"Tripura",UP:"Uttar Pradesh",UT:"Uttarakhand",WB:"West Bengal",AN:"Andaman & Nicobar",CH:"Chandigarh",DN:"Dadra & Nagar Haveli",LD:"Lakshadweep",PY:"Puducherry"};ngOnInit(){this.route.queryParams.subscribe(n=>{this.searchQuery=n.q||"",this.filterState=n.state||"",this.filterGender=n.gender||"",this.resetAndSearch()})}onSearch(){this.resetAndSearch()}resetAndSearch(){this.currentPage=1,this.hasMore=!0,this.results.set([]),this.resultIds.set([]),this.hasSearched=!0,this.loadProfiles()}onScrollLoadMore(){!this.isLoading&&this.hasMore&&(this.currentPage++,this.loadProfiles())}loadProfiles(){let n=this.searchQuery.trim();if(!n&&!this.filterState&&!this.filterGender){this.hasSearched&&this.results.set([]);return}this.isLoading=!0;let e={};n&&(e.search=n),this.filterState&&(e.state=this.filterState),this.filterGender&&(e.gender=this.filterGender),e.page=this.currentPage,e.limit=20,this.profileService.getProfiles(e).then(a=>{let m=a;if(this.isGuest&&m.profileIds)this.resultIds.update(s=>[...s,...m.profileIds||[]]),this.hasMore=(m.profileIds||[]).length===e.limit;else{let s=a.profiles||[];this.results.update($=>[...$,...s]),this.hasMore=s.length===e.limit}this.isLoading=!1},()=>{this.isLoading=!1,this.hasMore=!1})}getPlaceholderImg(n){return n==="female"?"assets/bride.png":"assets/groom.png"}getLoginRedirect(n){return`/login?redirect=${encodeURIComponent("/profile/"+n)}`}getTierViewClass(n){let e=(n||"bronze").toString().toLowerCase();return["diamond","gold","silver","bronze","crown"].includes(e)?`${e}-view-profile`:"bronze-view-profile"}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-search"]],decls:29,vars:6,consts:[["appInfiniteScroll","",1,"search-page-content",3,"scrolled","isLoading","hasMore"],[1,"search-header"],[1,"search-form-container"],[1,"search-form",3,"ngSubmit"],[1,"input-group"],[1,"fa-solid","fa-magnifying-glass","icon"],["type","text","placeholder","Search by name, occupation, or city...","name","searchQuery",1,"search-input",3,"ngModelChange","ngModel"],[1,"filters-row"],[1,"select-wrapper"],["name","state",1,"filter-select",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["name","gender",1,"filter-select",3,"ngModelChange","ngModel"],["value","male"],["value","female"],["type","submit",1,"search-button"],[1,"results-container"],[1,"results-count"],[1,"cards-container"],[1,"no-results"],[1,"loading-spinner-container",2,"text-align","center","margin","2rem 0"],[1,"card","result-card","result-card-guest",3,"routerLink"],[1,"image-content"],[1,"overlay","result-overlay"],[1,"card-image","card-image-placeholder"],[1,"fa-solid","fa-user"],[1,"card-content"],[1,"full-name","card-name"],[1,"card","result-card"],[1,"overlay","result-overlay",3,"ngClass"],[1,"card-image"],["loading","lazy","alt","profile",1,"card-image",3,"src"],[1,"dob"],[1,"occupation"],[1,"height"],[1,"state"],[1,"view-profile-btn",3,"ngClass","routerLink"],[1,"fa-solid","fa-user-slash","no-results-icon"],[1,"fa-solid","fa-spinner","fa-spin","fa-2x",2,"color","var(--primary-color)"],[2,"margin-top","10px","color","#666"]],template:function(e,a){e&1&&(i(0,"div",0),b("scrolled",function(){return a.onScrollLoadMore()}),i(1,"div",1)(2,"h1"),o(3,"Find Your Perfect Match"),r(),i(4,"p"),o(5,"Use the filters below to refine your search."),r()(),i(6,"div",2)(7,"form",3),b("ngSubmit",function(){return a.onSearch()}),i(8,"div",4),c(9,"i",5),i(10,"input",6),M("ngModelChange",function(s){return v(a.searchQuery,s)||(a.searchQuery=s),s}),r()(),i(11,"div",7)(12,"div",8)(13,"select",9),M("ngModelChange",function(s){return v(a.filterState,s)||(a.filterState=s),s}),i(14,"option",10),o(15,"Any State"),r(),f(16,ie,2,2,"option",11,y),r()(),i(18,"div",8)(19,"select",12),M("ngModelChange",function(s){return v(a.filterGender,s)||(a.filterGender=s),s}),i(20,"option",10),o(21,"Any Gender"),r(),i(22,"option",13),o(23,"Groom (Male)"),r(),i(24,"option",14),o(25,"Bride (Female)"),r()()(),i(26,"button",15),o(27," Search Profiles "),r()()()(),p(28,pe,10,5,"div",16),r()),e&2&&(g("isLoading",a.isLoading)("hasMore",a.hasMore),l(10),x("ngModel",a.searchQuery),l(3),x("ngModel",a.filterState),l(3),_(a.states),l(3),x("ngModel",a.filterGender),l(9),h(a.hasSearched?28:-1))},dependencies:[A,N,z,G,J,F,K,Q,R,H,D,W,U,j,Y,V],styles:[".search-container[_ngcontent-%COMP%]{padding:0 0 1.5rem;width:100%}.search-heading[_ngcontent-%COMP%]{text-align:center;color:#d11616;margin:0 0 1.25rem}.search-heading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.search-form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.search-input-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap;align-items:center}.search-filter[_ngcontent-%COMP%]{padding:.75rem 1rem;border:2px solid #e0e0e0;border-radius:25px;font-size:.95rem;min-width:140px}.search-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:#d11616}.search-input[_ngcontent-%COMP%]{flex:1;padding:1rem 1.5rem;border:2px solid #e0e0e0;border-radius:25px;font-size:1rem}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#d11616}.search-btn[_ngcontent-%COMP%]{padding:1rem 1.5rem;background-color:#d11616;color:#fff;border:none;border-radius:25px;font-weight:700;cursor:pointer;transition:background-color .3s}.search-btn[_ngcontent-%COMP%]:hover{background-color:#a00d0d}.search-results[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto 0;display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem}.search-result-card[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1rem;border:1px solid #eee;border-radius:12px;text-decoration:none;color:inherit;transition:box-shadow .2s,transform .2s}.search-result-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a;transform:translateY(-2px)}.search-result-img[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:cover;border-radius:8px}.search-result-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.1rem}.search-result-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0;font-size:.9rem;color:#555}.search-empty[_ngcontent-%COMP%]{text-align:center;color:#666;margin-top:2rem}.result-card-guest[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.result-card-guest[_ngcontent-%COMP%]:hover{opacity:.9}.view-profile-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:6px 14px;border-radius:6px;font-size:14px;color:#fff;text-decoration:none;cursor:pointer;margin-top:8px;border:none}.bronze-view-profile[_ngcontent-%COMP%]{background-color:#8a5a44}.bronze-view-profile[_ngcontent-%COMP%]:hover{background-color:#6d4736}.card-image-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:#e5e7eb;border-radius:50%;font-size:3rem;color:#9ca3af;height:160px;width:160px}@media(max-width:768px){.search-input-group[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-input[_ngcontent-%COMP%], .search-filter[_ngcontent-%COMP%], .search-btn[_ngcontent-%COMP%]{width:100%;min-width:100%}.search-results[_ngcontent-%COMP%]{grid-template-columns:1fr}.search-result-card[_ngcontent-%COMP%]{padding:.75rem}.search-result-img[_ngcontent-%COMP%]{width:60px;height:60px}}"]})};export{Z as SearchComponent};
