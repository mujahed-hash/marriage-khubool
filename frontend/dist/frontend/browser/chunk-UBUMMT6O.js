import{a as W,c as N,d as L,e as T,f as D,g as j,i as z,j as B,l as F,p as G}from"./chunk-AKKU7WAO.js";import{a as R}from"./chunk-WNVLNEZI.js";import{b as x}from"./chunk-YRFZ7VUJ.js";import{E as l,I as P,La as I,R as b,S,Ua as k,W as w,X as t,Y as n,Z as v,a as C,da as V,fa as M,ha as c,n as O,pa as s,qa as E,r as u,ra as A,s as d,t as m,ta as p,ua as f,va as h,x as _}from"./chunk-AY3CH6AK.js";var y=class r{api=u(x);getSettings(){return this.api.get("/settings")}updateSettings(o){return this.api.put("/settings",o)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=O({token:r,factory:r.\u0275fac,providedIn:"root"})};function q(r,o){r&1&&(t(0,"div",3),v(1,"div",5),t(2,"p"),s(3,"Loading settings..."),n()())}function H(r,o){if(r&1&&(t(0,"div",33),s(1),n()),r&2){let e=c(2);l(),E(e.message())}}function J(r,o){if(r&1){let e=V();t(0,"form",6),M("ngSubmit",function(){d(e);let i=c();return m(i.saveSettings())}),t(1,"section",7)(2,"h2"),v(3,"i",8),s(4," Notifications"),n(),t(5,"div",9)(6,"label",10),s(7,"Email me when someone sends interest"),n(),t(8,"input",11),h("ngModelChange",function(i){d(e);let a=c();return f(a.notifications.emailOnInterest,i)||(a.notifications.emailOnInterest=i),m(i)}),n()(),t(9,"div",9)(10,"label",12),s(11,"Email me when someone views my profile"),n(),t(12,"input",13),h("ngModelChange",function(i){d(e);let a=c();return f(a.notifications.emailOnVisitor,i)||(a.notifications.emailOnVisitor=i),m(i)}),n()(),t(13,"div",9)(14,"label",14),s(15,"Email me when someone shortlists me"),n(),t(16,"input",15),h("ngModelChange",function(i){d(e);let a=c();return f(a.notifications.emailOnShortlist,i)||(a.notifications.emailOnShortlist=i),m(i)}),n()()(),t(17,"section",7)(18,"h2"),v(19,"i",16),s(20," Privacy"),n(),t(21,"div",9)(22,"label",17),s(23,"Show contact information on profile"),n(),t(24,"input",18),h("ngModelChange",function(i){d(e);let a=c();return f(a.privacy.showContactInfo,i)||(a.privacy.showContactInfo=i),m(i)}),n()(),t(25,"div",9)(26,"label",19),s(27,"Show when I was last active"),n(),t(28,"input",20),h("ngModelChange",function(i){d(e);let a=c();return f(a.privacy.showLastSeen,i)||(a.privacy.showLastSeen=i),m(i)}),n()(),t(29,"div",21)(30,"label",22),s(31,"Who can see my profile"),n(),t(32,"select",23),h("ngModelChange",function(i){d(e);let a=c();return f(a.privacy.profileVisibility,i)||(a.privacy.profileVisibility=i),m(i)}),t(33,"option",24),s(34,"Everyone"),n(),t(35,"option",25),s(36,"Members Only"),n(),t(37,"option",26),s(38,"Premium Members Only"),n()()()(),t(39,"section",7)(40,"h2"),v(41,"i",27),s(42," Account"),n(),t(43,"div",9)(44,"label",28),s(45," Profile active "),t(46,"span",29),s(47,"(Deactivate to hide from search)"),n()(),t(48,"input",30),M("ngModelChange",function(){d(e);let i=c();return m(i.toggleProfileActive())}),n()()(),t(49,"div",31)(50,"button",32),s(51),n()(),b(52,H,2,1,"div",33),n()}if(r&2){let e=c();l(8),p("ngModel",e.notifications.emailOnInterest),l(4),p("ngModel",e.notifications.emailOnVisitor),l(4),p("ngModel",e.notifications.emailOnShortlist),l(8),p("ngModel",e.privacy.showContactInfo),l(4),p("ngModel",e.privacy.showLastSeen),l(4),p("ngModel",e.privacy.profileVisibility),l(16),w("ngModel",e.profileActive())("disabled",e.togglingActive()),l(2),w("disabled",e.saving()),l(),A(" ",e.saving()?"Saving...":"Save Settings"," "),l(),S(e.message()?52:-1)}}var U=class r{loading=_(!0);saving=_(!1);message=_("");profileActive=_(!0);togglingActive=_(!1);notifications={emailOnInterest:!0,emailOnVisitor:!0,emailOnShortlist:!1};privacy={showContactInfo:!0,showLastSeen:!0,profileVisibility:"everyone"};settingsService=u(y);profileService=u(R);api=u(x);ngOnInit(){this.loadSettings()}async loadSettings(){this.loading.set(!0);try{let o=await this.settingsService.getSettings();o.settings?.notifications&&(this.notifications=C(C({},this.notifications),o.settings.notifications)),o.settings?.privacy&&(this.privacy=C(C({},this.privacy),o.settings.privacy))}catch{}try{let o=await this.profileService.fetchMyProfile();o&&this.profileActive.set(o.isActive!==!1)}catch{}this.loading.set(!1)}async saveSettings(){this.saving.set(!0);try{await this.settingsService.updateSettings({notifications:this.notifications,privacy:this.privacy}),this.showMessage("Settings saved successfully!")}catch{this.showMessage("Failed to save settings.")}this.saving.set(!1)}showMessage(o){this.message.set(o),setTimeout(()=>this.message.set(""),3e3)}async toggleProfileActive(){this.togglingActive.set(!0);try{let o=this.profileActive()?"/profiles/me/deactivate":"/profiles/me/activate",e=await this.api.put(o,{});this.profileActive.set(e.isActive),this.showMessage(e.isActive?"Profile activated!":"Profile deactivated.")}catch{this.showMessage("Failed to update profile status.")}this.togglingActive.set(!1)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=P({type:r,selectors:[["app-settings"]],decls:6,vars:1,consts:[[1,"settings-container"],[1,"page-heading"],[1,"fa-solid","fa-gear"],[1,"loading-state"],[1,"settings-form"],[1,"spinner"],[1,"settings-form",3,"ngSubmit"],[1,"settings-section"],[1,"fa-solid","fa-bell"],[1,"toggle-row"],["for","emailInterest"],["type","checkbox","id","emailInterest","name","emailOnInterest",1,"toggle",3,"ngModelChange","ngModel"],["for","emailVisitor"],["type","checkbox","id","emailVisitor","name","emailOnVisitor",1,"toggle",3,"ngModelChange","ngModel"],["for","emailShortlist"],["type","checkbox","id","emailShortlist","name","emailOnShortlist",1,"toggle",3,"ngModelChange","ngModel"],[1,"fa-solid","fa-shield-halved"],["for","showContact"],["type","checkbox","id","showContact","name","showContactInfo",1,"toggle",3,"ngModelChange","ngModel"],["for","showLastSeen"],["type","checkbox","id","showLastSeen","name","showLastSeen",1,"toggle",3,"ngModelChange","ngModel"],[1,"select-row"],["for","visibility"],["id","visibility","name","profileVisibility",1,"select-input",3,"ngModelChange","ngModel"],["value","everyone"],["value","members"],["value","premium"],[1,"fa-solid","fa-user-gear"],["for","profileActive"],[2,"font-weight","400","color","#64748b"],["type","checkbox","id","profileActive","name","profileActive",1,"toggle",3,"ngModelChange","ngModel","disabled"],[1,"settings-actions"],["type","submit",1,"btn-save",3,"disabled"],[1,"settings-toast"]],template:function(e,g){e&1&&(t(0,"div",0)(1,"h1",1),v(2,"i",2),s(3," Settings"),n(),b(4,q,4,0,"div",3)(5,J,53,11,"form",4),n()),e&2&&(l(4),S(g.loading()?4:5))},dependencies:[I,G,j,B,F,W,z,N,L,D,T,k],styles:['.settings-container[_ngcontent-%COMP%]{width:100%;max-width:700px;margin:0 auto;padding:0 1rem;font-family:Inter,Segoe UI,system-ui,sans-serif}.page-heading[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1e293b;margin-bottom:1.5rem;display:flex;align-items:center;gap:.75rem}.page-heading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#64748b}.settings-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.settings-section[_ngcontent-%COMP%]{background:#fff;border-radius:14px;padding:1.5rem;border:1px solid #e2e8f0;box-shadow:0 2px 6px #00000008}.settings-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1.25rem;font-size:1.1rem;font-weight:700;color:#0f172a;display:flex;align-items:center;gap:.5rem}.settings-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#db2777;font-size:1rem}.toggle-row[_ngcontent-%COMP%], .select-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.75rem 0;border-bottom:1px solid #f1f5f9}.toggle-row[_ngcontent-%COMP%]:last-child, .select-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.toggle-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .select-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;color:#334155;flex:1}.toggle[_ngcontent-%COMP%]{appearance:none;width:44px;height:24px;background:#cbd5e1;border-radius:12px;position:relative;cursor:pointer;transition:background .2s;flex-shrink:0}.toggle[_ngcontent-%COMP%]:before{content:"";position:absolute;top:2px;left:2px;width:20px;height:20px;background:#fff;border-radius:50%;transition:transform .2s;box-shadow:0 1px 3px #0003}.toggle[_ngcontent-%COMP%]:checked{background:#db2777}.toggle[_ngcontent-%COMP%]:checked:before{transform:translate(20px)}.select-input[_ngcontent-%COMP%]{padding:.4rem .75rem;border:1px solid #e2e8f0;border-radius:8px;font-size:.85rem;color:#334155;background:#f8fafc;cursor:pointer;outline:none}.select-input[_ngcontent-%COMP%]:focus{border-color:#db2777}.settings-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.btn-save[_ngcontent-%COMP%]{padding:.65rem 1.75rem;background:#db2777;color:#fff;border:none;border-radius:10px;font-weight:600;font-size:.9rem;cursor:pointer;transition:background .2s,transform .2s}.btn-save[_ngcontent-%COMP%]:hover{background:#be185d;transform:translateY(-1px)}.btn-save[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.settings-toast[_ngcontent-%COMP%]{text-align:center;padding:.5rem;background:#ecfdf5;color:#059669;border-radius:8px;font-size:.85rem;font-weight:500}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;color:#64748b}.spinner[_ngcontent-%COMP%]{width:36px;height:36px;border:3px solid #f3f4f6;border-top-color:#db2777;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:.75rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}']})};export{U as SettingsComponent};
