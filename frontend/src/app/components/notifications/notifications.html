<div class="notifications-container">
    <h1 class="page-heading"><i class="fa-solid fa-bell"></i> Notifications</h1>

    @if (loading()) {
        <div class="loading-state">
            <div class="spinner"></div>
            <p>Loading...</p>
        </div>
    } @else if (notifications().length === 0) {
        <div class="empty-state">
            <i class="fa-solid fa-bell-slash"></i>
            <p>No notifications yet.</p>
        </div>
    } @else {
        <div class="notifications-actions">
            @if (unreadCount() > 0) {
                <button class="btn-mark-all" (click)="markAllAsRead()">Mark all as read</button>
            }
        </div>
        <div class="notifications-list">
            @for (n of notifications(); track n._id) {
                <div class="notification-card" [class.unread]="!n.read">
                    <i class="fa-solid" [ngClass]="getIcon(n.type)"></i>
                    <div class="notification-body">
                        <p class="notification-message">{{ n.message }}</p>
                        <span class="notification-time">{{ timeAgo(n.createdAt) }}</span>
                    </div>
                    @if (!n.read) {
                        <button class="btn-mark-read" (click)="markAsRead(n._id)">Mark read</button>
                    }
                </div>
            }
        </div>
    }
</div>
