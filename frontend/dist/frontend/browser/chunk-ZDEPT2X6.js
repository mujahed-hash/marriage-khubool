import{a as D}from"./chunk-5ZVZRNXP.js";import{a as N}from"./chunk-NDOALP63.js";import{a as k}from"./chunk-JJRD7MNC.js";import{a as T}from"./chunk-WNVLNEZI.js";import{a as O}from"./chunk-FH2X7N32.js";import"./chunk-YRFZ7VUJ.js";import{Aa as E,Ba as L,C,E as l,I as b,La as I,R as s,S as c,Sa as H,T as P,U as v,Ua as w,V as u,W as g,X as e,Y as t,Z as d,a as S,fa as M,ha as m,pa as a,qa as _,r as x,ra as f,x as h,za as y}from"./chunk-AY3CH6AK.js";var G=n=>["/profile",n],z=(n,r)=>r._id||n;function B(n,r){if(n&1&&(e(0,"a",28)(1,"div",29),d(2,"span",30),e(3,"div",31),d(4,"i",32),t()(),e(5,"div",33)(6,"h2",34),a(7,"Member"),t(),e(8,"p"),a(9,"Login to view profile"),t()()()),n&2){let i=r.$implicit,o=m(2);g("routerLink",o.getLoginRedirect(i))}}function F(n,r){if(n&1&&v(0,B,10,1,"a",28,P),n&2){let i=m();u(i.diamondIds())}}function U(n,r){if(n&1&&(e(0,"span",37),a(1),t()),n&2){let i=m().$implicit,o=m(2);l(),f("",o.getMatchScore(i._id),"% Match")}}function R(n,r){if(n&1&&(e(0,"div",17)(1,"div",29),d(2,"span",30),e(3,"div",35),d(4,"img",36),E(5,"photoUrl"),t()(),e(6,"div",33),s(7,U,2,1,"span",37),e(8,"h2",34),a(9),t(),e(10,"p",38),a(11),t(),e(12,"p",39),a(13),t(),e(14,"p",40),a(15),t(),e(16,"p",41),a(17),t(),e(18,"a",42),a(19,"View Profile"),t()()()),n&2){let i=r.$implicit,o=m(2);l(4),g("src",L(5,8,i.profilePhotoUrl)||o.getPlaceholderImg(i.gender),C),l(3),c(i._id&&o.getMatchScore(i._id)!=null?7:-1),l(2),_(i.fullName||"Profile"),l(2),f("DOB: ",i.dateOfBirth||"N/A"),l(2),_(i.occupation||"N/A"),l(2),f("Height: ",i.height||"N/A"),l(2),f("Location: ",i.city||i.state||"N/A"),l(),g("routerLink",y(10,G,i.profileId||i._id))}}function V(n,r){if(n&1&&v(0,R,20,12,"div",17,z),n&2){let i=m();u(i.diamondProfiles())}}function $(n,r){n&1&&(e(0,"div",17)(1,"div",29),d(2,"span",30),e(3,"div",35),d(4,"img",43),t()(),e(5,"div",33)(6,"h2",34),a(7,"Mohammed Khan"),t(),e(8,"p",38),a(9,"DOB: 7-12-1997"),t(),e(10,"p",39),a(11,"Software Engg"),t(),e(12,"p",40),a(13,"Height: 5'3"),t(),e(14,"p",41),a(15,"Location: Hyderabad"),t(),e(16,"a",44),a(17,"View Profiles"),t()()())}function j(n,r){n&1&&(e(0,"div",17)(1,"div",29),d(2,"span",30),e(3,"div",35),d(4,"img",43),t()(),e(5,"div",33)(6,"h2",34),a(7,"No profiles yet"),t(),e(8,"a",44),a(9,"View Profiles"),t()()())}function K(n,r){n&1&&(e(0,"div",18),d(1,"i",45),e(2,"p",46),a(3,"Loading more diamond profiles..."),t()())}function q(n,r){if(n&1&&(e(0,"a",47)(1,"div",29),d(2,"span",48),e(3,"div",31),d(4,"i",32),t()(),e(5,"div",33)(6,"h2",34),a(7,"Member"),t(),e(8,"p"),a(9,"Login to view profile"),t()()()),n&2){let i=r.$implicit,o=m(2);g("routerLink",o.getLoginRedirect(i))}}function J(n,r){if(n&1&&v(0,q,10,1,"a",47,P),n&2){let i=m();u(i.goldIds())}}function Q(n,r){if(n&1&&(e(0,"span",37),a(1),t()),n&2){let i=m().$implicit,o=m(2);l(),f("",o.getMatchScore(i._id),"% Match")}}function W(n,r){if(n&1&&(e(0,"div",25)(1,"div",29),d(2,"span",48),e(3,"div",35),d(4,"img",36),E(5,"photoUrl"),t()(),e(6,"div",33),s(7,Q,2,1,"span",37),e(8,"h2",34),a(9),t(),e(10,"p",38),a(11),t(),e(12,"p",39),a(13),t(),e(14,"p",40),a(15),t(),e(16,"p",41),a(17),t(),e(18,"a",49),a(19,"View Profile"),t()()()),n&2){let i=r.$implicit,o=m(2);l(4),g("src",L(5,8,i.profilePhotoUrl)||o.getPlaceholderImg(i.gender),C),l(3),c(i._id&&o.getMatchScore(i._id)!=null?7:-1),l(2),_(i.fullName||"Profile"),l(2),f("DOB: ",i.dateOfBirth||"N/A"),l(2),_(i.occupation||"N/A"),l(2),f("Height: ",i.height||"N/A"),l(2),f("Location: ",i.city||i.state||"N/A"),l(),g("routerLink",y(10,G,i.profileId||i._id))}}function X(n,r){if(n&1&&v(0,W,20,12,"div",25,z),n&2){let i=m();u(i.goldProfiles())}}function Y(n,r){n&1&&(e(0,"div",25)(1,"div",29),d(2,"span",48),e(3,"div",35),d(4,"img",43),t()(),e(5,"div",33)(6,"h2",34),a(7,"Mohammed Khan"),t(),e(8,"p",38),a(9,"DOB: 7-12-1997"),t(),e(10,"p",39),a(11,"B.Ed"),t(),e(12,"p",40),a(13,"Height: 5'3"),t(),e(14,"p",41),a(15,"Location: Telangana"),t(),e(16,"a",50),a(17,"View Profiles"),t()()())}function Z(n,r){n&1&&(e(0,"div",25)(1,"div",29),d(2,"span",48),e(3,"div",35),d(4,"img",43),t()(),e(5,"div",33)(6,"h2",34),a(7,"No profiles yet"),t(),e(8,"a",50),a(9,"View Profiles"),t()()())}function ee(n,r){n&1&&(e(0,"div",18),d(1,"i",51),e(2,"p",46),a(3,"Loading more gold profiles..."),t()())}var A=class n{diamondProfiles=h([]);goldProfiles=h([]);diamondIds=h([]);goldIds=h([]);matchScores=h({});diamondPage=1;diamondLoading=!1;diamondHasMore=!0;goldPage=1;goldLoading=!1;goldHasMore=!0;profileService=x(T);matchService=x(D);authService=x(O);get isGuest(){return!this.authService.isAuthenticated()}ngOnInit(){this.loadDiamondProfiles(),this.loadGoldProfiles()}loadDiamondProfiles(){this.diamondLoading||!this.diamondHasMore||(this.diamondLoading=!0,this.profileService.getProfiles({tier:"diamond",limit:8,page:this.diamondPage}).then(r=>{let i=r;if(this.isGuest&&i.profileIds)this.diamondIds.update(o=>[...o,...i.profileIds||[]]),this.diamondHasMore=(i.profileIds||[]).length===8;else{let o=r.profiles||[];this.diamondProfiles.update(p=>[...p,...o]),this.loadMatchScores(o),this.diamondHasMore=o.length===8}this.diamondLoading=!1},()=>{this.diamondLoading=!1,this.diamondHasMore=!1}))}loadGoldProfiles(){this.goldLoading||!this.goldHasMore||(this.goldLoading=!0,this.profileService.getProfiles({tier:"gold",limit:8,page:this.goldPage}).then(r=>{let i=r;if(this.isGuest&&i.profileIds)this.goldIds.update(o=>[...o,...i.profileIds||[]]),this.goldHasMore=(i.profileIds||[]).length===8;else{let o=r.profiles||[];this.goldProfiles.update(p=>[...p,...o]),this.loadMatchScores(o),this.goldHasMore=o.length===8}this.goldLoading=!1},()=>{this.goldLoading=!1,this.goldHasMore=!1}))}getLoginRedirect(r){return`/login?redirect=${encodeURIComponent("/profile/"+r)}`}onDiamondScroll(){!this.diamondLoading&&this.diamondHasMore&&(this.diamondPage++,this.loadDiamondProfiles())}onGoldScroll(){!this.goldLoading&&this.goldHasMore&&(this.goldPage++,this.loadGoldProfiles())}async loadMatchScores(r){if(!(!this.authService.isAuthenticated()||!r.length))try{let i=r.map(p=>p._id).filter(Boolean);if(i.length===0)return;let o=await this.matchService.getMatchScoresBatch(i);this.matchScores.update(p=>S(S({},p),o.scores))}catch{}}getMatchScore(r){return this.matchScores()[r]??null}getPlaceholderImg(r){return r==="female"?"assets/bride.png":"assets/groom.png"}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=b({type:n,selectors:[["app-home"]],decls:46,vars:12,consts:[[1,"center-page-content"],[1,"cover-pic"],["loading","lazy","src","assets/cover.png","alt","Cover Pic",1,"cover-pic1"],["loading","lazy","src","assets/cover-pic2.png","alt","Cover Pic",1,"cover-pic2"],["id","create-profile"],[1,"fa-solid","fa-star"],["routerLink","/create-profile"],[1,"fa-regular","fa-pen-to-square"],[1,"membership"],["loading","lazy","src","assets/membershippic.jpg","alt","membership",1,"membership-img1"],["loading","lazy","src","assets/membershipic2.png","alt","membership",1,"membership-img2"],["routerLink","/membership",1,"visit-plans-btn"],[1,"profile-cards-container"],[1,"profile-card-h1","diamond-heading"],[1,"fa-solid","fa-gem"],["appInfiniteScroll","",1,"diamond-profile-cards","profile-cards",2,"width","100%","max-height","800px","overflow-y","auto","overflow-x","hidden",3,"scrolled","isLoading","hasMore"],[1,"cards-container","diamond-cc"],[1,"card","diamond-card"],[1,"loading-spinner-container",2,"text-align","center","margin","1rem 0","width","100%"],[1,"more-profiles","diamond-more-profiles"],["routerLink","/search",1,"more-profiles","more-diamond-profiles","diamond-profile-styled-link"],[1,"profile-card-h1","gold-heading"],[1,"fa-solid","fa-trophy"],["appInfiniteScroll","",1,"gold-profile-cards","profile-cards",2,"width","100%","max-height","800px","overflow-y","auto","overflow-x","hidden",3,"scrolled","isLoading","hasMore"],[1,"cards-container","gold-cc"],[1,"card","gold-card"],[1,"more-profiles","gold-more-profiles"],["routerLink","/search",1,"more-profiles","more-gold-profiles","gold-profile-styled-link"],[1,"card","diamond-card","diamond-card-guest",3,"routerLink"],[1,"image-content"],[1,"overlay","diamond-overlay"],[1,"card-image","card-image-placeholder"],[1,"fa-solid","fa-user"],[1,"card-content"],[1,"full-name","card-name"],[1,"card-image"],["loading","lazy","alt","profile",1,"card-image",3,"src"],[1,"match-badge"],[1,"dob"],[1,"occupation"],[1,"height"],[1,"state"],[1,"diamond-view-profile",3,"routerLink"],["loading","lazy","src","assets/groom.png","alt","groom",1,"card-image"],["routerLink","/profiles/diamond",1,"diamond-view-profile"],[1,"fa-solid","fa-spinner","fa-spin","fa-2x",2,"color","var(--diamond-color)"],[2,"margin-top","5px","color","#666"],[1,"card","gold-card","gold-card-guest",3,"routerLink"],[1,"overlay","gold-overlay"],[1,"gold-view-profile",3,"routerLink"],["routerLink","/profiles/gold",1,"gold-view-profile"],[1,"fa-solid","fa-spinner","fa-spin","fa-2x",2,"color","var(--gold-color)"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1),d(2,"img",2)(3,"img",3),t(),e(4,"span",4)(5,"h1"),a(6,"Create a Profile to post an Ad & Find a Perfect Match Today! "),d(7,"i",5),t(),e(8,"p"),a(9,"Don't miss out on the opportunity! Creating your profile is the first step to finding your perfect life partner. Start now and begin your journey to love!"),t(),e(10,"a",6),d(11,"i",7),a(12," Create Profile"),t()(),e(13,"div",8),d(14,"img",9)(15,"img",10),e(16,"a",11),a(17,"View Membership Plans"),t()(),e(18,"div",12)(19,"h1",13),d(20,"i",14),a(21," Diamond profiles"),t(),e(22,"div",15),M("scrolled",function(){return o.onDiamondScroll()}),e(23,"div",16),s(24,F,2,0)(25,V,2,0),s(26,$,18,0,"div",17),s(27,j,10,0,"div",17),t(),s(28,K,4,0,"div",18),t(),e(29,"div",19)(30,"a",20),a(31,"Search All Profiles"),t()()(),e(32,"div",12)(33,"h1",21),d(34,"i",22),a(35," Gold profiles"),t(),e(36,"div",23),M("scrolled",function(){return o.onGoldScroll()}),e(37,"div",24),s(38,J,2,0)(39,X,2,0),s(40,Y,18,0,"div",25),s(41,Z,10,0,"div",25),t(),s(42,ee,4,0,"div",18),t(),e(43,"div",26)(44,"a",27),a(45,"Search All Profiles"),t()()()()),i&2&&(l(22),g("isLoading",o.diamondLoading)("hasMore",o.diamondHasMore),l(2),c(o.isGuest?24:25),l(2),c(!o.isGuest&&o.diamondProfiles().length===0?26:-1),l(),c(o.isGuest&&o.diamondIds().length===0&&!o.diamondLoading?27:-1),l(),c(o.diamondLoading?28:-1),l(8),g("isLoading",o.goldLoading)("hasMore",o.goldHasMore),l(2),c(o.isGuest?38:39),l(2),c(!o.isGuest&&o.goldProfiles().length===0?40:-1),l(),c(o.isGuest&&o.goldIds().length===0&&!o.goldLoading?41:-1),l(),c(o.goldLoading?42:-1))},dependencies:[I,w,H,N,k],styles:[".center-page-content[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.match-badge[_ngcontent-%COMP%]{display:inline-block;background:var(--tier-primary, #db2777);color:#fff;font-size:.75rem;font-weight:600;padding:.2rem .5rem;border-radius:6px;margin-bottom:.5rem}.cover-pic[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.cover-pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.cover-pic2[_ngcontent-%COMP%]{display:none}.membership[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;gap:1rem;margin:2rem 0}.membership-img1[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.membership-img2[_ngcontent-%COMP%]{display:none;width:100%;height:auto}.profile-cards-container[_ngcontent-%COMP%]{width:100%;max-width:1200px;padding:2rem 1rem}.cards-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:2rem;justify-items:center;padding:1rem 0}.profile-card-h1[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:1.5rem;text-align:center}.diamond-card-guest[_ngcontent-%COMP%], .gold-card-guest[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.diamond-card-guest[_ngcontent-%COMP%]:hover, .gold-card-guest[_ngcontent-%COMP%]:hover{opacity:.9}.card-image-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:#e5e7eb;border-radius:50%;font-size:3rem;color:#9ca3af;height:160px;width:160px}@media(max-width:768px){.cover-pic1[_ngcontent-%COMP%]{display:none}.cover-pic2[_ngcontent-%COMP%]{display:block}.membership-img1[_ngcontent-%COMP%]{display:none}.membership-img2[_ngcontent-%COMP%]{display:block}.profile-card-h1[_ngcontent-%COMP%]{font-size:1.4rem}.cards-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:.5rem;padding-inline:.5rem}#create-profile[_ngcontent-%COMP%]{padding:1.5rem 1rem;margin:1rem}#create-profile[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.3rem}}"]})};export{A as HomeComponent};
